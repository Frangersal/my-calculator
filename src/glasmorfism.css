/* Glassmorphism mejorado: fondo visible + contraste legible */
:root {
  --glass-bg: rgba(255, 255, 255, 0.05);
  --glass-border: rgba(255, 255, 255, 0.14);
  --glass-shadow: rgba(6, 10, 20, 0.36);
  --orb1: rgba(120, 86, 255, 0.18);
  --orb2: rgba(64, 224, 208, 0.12);
  --orb3: rgba(255, 130, 92, 0.1);
  --button-text: rgba(255, 255, 255, 0.7); /* blanco con ligera transparencia */
  --display-text: rgba(255, 255, 255, 0.7);
}

/* Reset box-sizing para evitar cálculos de ancho inesperados */
*,
*::before,
*::after {
  box-sizing: border-box;
}

/* Evitar scroll horizontal globalmente en dispositivos móviles */
html,
body {
  overflow-x: hidden;
}

/* Fondo de la página: gradiente oscuro + orbes para que el vidrio se note */
html,
body {
  height: 100%;
  margin: 0;
}
body {
  display: flex;
  align-items: center;
  justify-content: center;
  background: radial-gradient(
      circle at 10% 20%,
      rgba(16, 24, 72, 0.6) 0%,
      transparent 25%
    ),
    radial-gradient(
      circle at 90% 80%,
      rgba(36, 14, 44, 0.5) 0%,
      transparent 20%
    ),
    linear-gradient(180deg, #0b1020 0%, #0f1a2b 100%);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Contenedor principal: superficie de vidrio con orbes difuminados detrás */
.calculator-container {
  position: relative; /* necesario para los pseudo-elementos */
  z-index: 1;
  /* Never exceed viewport width minus small margin */
  max-width: min(320px, calc(100vw - 24px));
  margin: 0 auto;
  padding: 14px;
  border-radius: 18px;
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.04),
    rgba(255, 255, 255, 0.01)
  );
  border: 1px solid var(--glass-border);
  box-shadow: 0 14px 40px var(--glass-shadow);
  backdrop-filter: blur(14px) saturate(120%);
  -webkit-backdrop-filter: blur(14px) saturate(120%);
  overflow: visible;
}

/* Orbes decorativos detrás (dentro del contenedor pero bajo el contenido) */
.calculator-container::after {
  content: "";
  position: absolute;
  left: -20%;
  top: -30%;
  width: 160%;
  height: 160%;
  background-image: radial-gradient(
      circle at 20% 20%,
      var(--orb1) 0%,
      transparent 18%
    ),
    radial-gradient(circle at 80% 30%, var(--orb2) 0%, transparent 18%),
    radial-gradient(circle at 60% 80%, var(--orb3) 0%, transparent 20%);
  filter: blur(38px) saturate(140%);
  opacity: 0.9;
  mix-blend-mode: screen;
  z-index: 0;
  pointer-events: none;
}

/* Asegura que el contenido esté encima de los orbes */
.calculator-container > * {
  position: relative;
  z-index: 2;
}

/* Título de la calculadora */
.calculator-container h1 {
  color: var(--display-text);
  margin: 0 0 10px;
  font-size: 1.6rem;
  font-weight: 800;
  text-align: center;
  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.55);
}

/* Display: vidrio más claro con buen contraste para el resultado */
.calculator-display {
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.06),
    rgba(255, 255, 255, 0.02)
  );
  border-radius: 12px;
  padding: 10px 12px;
  margin-bottom: 14px;
  font-size: 20px;
  font-weight: 800;
  text-align: right;
  min-height: 56px;
  display: flex;
  align-items: center;
  justify-content: flex-end;
  color: var(--display-text);
  border: 1px solid rgba(255, 255, 255, 0.06);
  box-shadow: inset 0 -3px 10px rgba(0, 0, 0, 0.28);
}

/* Filas y columnas: espaciado ajustado para que los botones queden alineados */
.calculator-row {
  margin: 6px 0;
  display: flex; /* reforzar el comportamiento flex de la fila */
  flex-wrap: nowrap; /* evitar que las columnas hagan wrap en pantallas anchas */
  align-items: center;
}

/* Forzar 4 columnas iguales por fila para que 4 botones encajen sin desbordar */
.calculator-row .col {
  box-sizing: border-box;
  flex: 0 0 25%; /* cada columna ocupa 25% del ancho de la fila */
  max-width: 25%;
  padding: 0 6px;
  display: flex;
  justify-content: center;
}

/* Botones: vidrio con translúcido, texto legible (texto oscuro) y pequeño relieve. Mantener 60x60. */
.calculator-button {
  width: 60px;
  height: 60px;
  min-width: 60px;
  min-height: 60px;
  padding: 0;
  margin: 2px;
  border-radius: 12px;
  font-size: 20px; /* texto más legible */
  font-weight: 800;
  line-height: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--button-text);
  position: relative;
  overflow: hidden;
  /* glass look: semi-transparente + blur + borde sutil */
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.14),
    rgba(255, 255, 255, 0.06)
  );
  border: 1px solid rgba(255, 255, 255, 0.18);
  box-shadow: 0 10px 26px rgba(2, 6, 14, 0.45);
  backdrop-filter: blur(10px) saturate(120%);
  -webkit-backdrop-filter: blur(10px) saturate(120%);
  /* sombra para hacer el blanco legible sobre el vidrio */
  text-shadow: 0 2px 6px rgba(0, 0, 0, 0.7);
  transition: transform 140ms cubic-bezier(0.2, 0.8, 0.2, 1),
    box-shadow 140ms ease;
}

/* sheen para dar brillo en la parte superior del botón */
.calculator-button::before {
  content: "";
  position: absolute;
  left: -10%;
  top: -40%;
  width: 120%;
  height: 60%;
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.28),
    rgba(255, 255, 255, 0.02)
  );
  transform: rotate(-12deg);
  opacity: 0.18;
  pointer-events: none;
}

.calculator-button.btn-warning {
  /* mantener glass pero con tono cálido */
  background: linear-gradient(
    180deg,
    rgba(255, 230, 160, 0.22),
    rgba(255, 200, 110, 0.08)
  );
  border: 1px solid rgba(255, 200, 90, 0.22);
  color: #111;
  box-shadow: 0 10px 26px rgba(8, 6, 2, 0.36);
}

.calculator-button:focus {
  outline: none;
  box-shadow: 0 10px 26px rgba(12, 20, 60, 0.32),
    0 0 0 6px rgba(64, 224, 208, 0.06);
}
.calculator-button:hover {
  transform: translateY(-4px);
  box-shadow: 0 18px 36px rgba(6, 10, 20, 0.42);
}
.calculator-button:active {
  transform: translateY(0);
  box-shadow: 0 8px 18px rgba(6, 10, 20, 0.36) inset;
}

/* pequeña señal visual en el display cuando hay overflow de texto */
.calculator-display span {
  max-width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Ajustes responsivos */
@media (max-width: 420px) {
  /* Contenedor más ajustado y cortar los orbes para evitar overflow horizontal */
  .calculator-container {
    max-width: 94%;
    padding: 12px;
    overflow: hidden;
  }

  /* Permitir que las filas hagan wrap en pantallas pequeñas para evitar scroll */
  .calculator-row {
    flex-wrap: wrap;
  }

  /* Columnas inicialmente 25% pero con padding reducido */
  .calculator-row .col {
    flex: 0 0 25%;
    max-width: 25%;
    padding: 4px;
  }

  /* Reducir botones ligeramente en móviles para mejor ajuste */
  .calculator-button {
    width: 56px;
    height: 56px;
    min-width: 56px;
    min-height: 56px;
    font-size: 18px;
  }
  .calculator-display {
    min-height: 46px;
    font-size: 18px;
  }
}

/* En pantallas muy pequeñas, dos columnas por fila */
@media (max-width: 360px) {
  .calculator-row .col {
    flex: 0 0 50%;
    max-width: 50%;
  }
  .calculator-button {
    width: 52px;
    height: 52px;
    min-width: 52px;
    min-height: 52px;
    font-size: 17px;
  }
  .calculator-display {
    min-height: 44px;
    font-size: 16px;
  }
}
